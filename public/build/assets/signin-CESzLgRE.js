import{C as o}from"./Core-DAdlDyCj.js";import{P as n}from"./PageManager-DG16GQE0.js";class i extends n{constructor(){super("sign-in")}async load(){this.data={title:"Sign In",description:"Sign In Page"}}init(){}setListners(){this.ELM.setClickListners("#signInBtn",this.login),this.ELM.setClickListners("#showPasswordBtn",()=>{this.showPassword("password")})}actions(){}showPassword(t){const s=document.getElementById(t),e=document.getElementById("showPasswordBtn");s.type==="password"?(s.type="text",e.innerHTML='<i class="fa-solid fa-eye"></i>'):(s.type="password",e.innerHTML='<i class="fa-solid fa-eye-slash"></i>')}async login(){const t=o.UIM.getInputs("signInForm",{}),s=await o.RM.post("/api/login",t,{requestType:"json",responseType:"json",showToast:!0});if(console.log(s),s.token){o.debugLog(s.token),o.LSM.setItem("token",s.token),console.log("Success");try{const e=await fetch(`/web-auth?token=${s.token}`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`}});window.location.href="/home"}catch(e){console.error("Error in GET request:",e)}}else console.log("Token is missing, unable to proceed")}}document.addEventListener("DOMContentLoaded",()=>{new i});
